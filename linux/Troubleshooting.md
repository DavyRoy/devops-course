üõ†Ô∏è 15. Troubleshooting ‚Äî –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

15.1 ICMP ‚Äî –ü—Ä–æ—Ç–æ–∫–æ–ª ICMP

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–ß—Ç–æ —Ç–∞–∫–æ–µ ICMP (—Å–ª—É–∂–µ–±–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
‚Ä¢	–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã:
‚Ä¢	Echo Request/Reply (ping)
‚Ä¢	Destination Unreachable
‚Ä¢	Time Exceeded
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ ICMP-—Ç—Ä–∞—Ñ–∏–∫–∞ —á–µ—Ä–µ–∑ tcpdump
‚Ä¢	–ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
‚Ä¢	ICMP –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω firewall
‚Ä¢	–£–∑–µ–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

‚∏ª

15.2 ping ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —É–∑–ª–∞

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏:
‚Ä¢	ping host
‚Ä¢	–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–∫–µ—Ç–æ–≤:
‚Ä¢	ping -c 4 host
‚Ä¢	–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –∏ –ø–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è (L3)
‚Ä¢	–¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:
‚Ä¢	unknown host
‚Ä¢	request timeout

‚∏ª

15.3 traceroute ‚Äî –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ –¥–æ —É–∑–ª–∞
‚Ä¢	–ê–Ω–∞–ª–∏–∑ –∑–∞–¥–µ—Ä–∂–µ–∫ –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ
‚Ä¢	–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
‚Ä¢	traceroute host
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–±–ª–µ–º –≤ –º–∞–≥–∏—Å—Ç—Ä–∞–ª—è—Ö
‚Ä¢	–û—Ç–ª–∏—á–∏–µ –æ—Ç tracepath

‚∏ª

15.4 netstat ‚Äî –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–µ—Ç–µ–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π:
‚Ä¢	netstat -tunlp
‚Ä¢	–û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã
‚Ä¢	PID –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –ø–æ—Ä—Ç–∞
‚Ä¢	–¢–∞–±–ª–∏—Ü–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤:
‚Ä¢	netstat -r
‚Ä¢	–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:
‚Ä¢	ss -tunlp

‚∏ª

15.5 Packet Analysis ‚Äî –ê–Ω–∞–ª–∏–∑ –ø–∞–∫–µ—Ç–æ–≤

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ø–∞–∫–µ—Ç–æ–≤ tcpdump:
‚Ä¢	tcpdump -i eth0
‚Ä¢	tcpdump host example.com
‚Ä¢	tcpdump port 80
‚Ä¢	–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞—Ö–≤–∞—Ç–∞ –≤ —Ñ–∞–π–ª:
‚Ä¢	tcpdump -w capture.pcap
‚Ä¢	–ê–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ Wireshark
‚Ä¢	–ü–æ–∏—Å–∫:
‚Ä¢	–ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
‚Ä¢	–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
‚Ä¢	–Ω–∞—Ä—É—à–µ–Ω–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤