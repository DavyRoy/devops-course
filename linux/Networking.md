üåê 13. Networking ‚Äî –°–µ—Ç–µ–≤—ã–µ –æ—Å–Ω–æ–≤—ã

13.1 TCP/IP Stack ‚Äî –°—Ç–µ–∫ TCP/IP

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–£—Ä–æ–≤–Ω–∏ —Å—Ç–µ–∫–∞:
‚Ä¢	–ö–∞–Ω–∞–ª—å–Ω—ã–π (Ethernet)
‚Ä¢	–°–µ—Ç–µ–≤–æ–π (IP)
‚Ä¢	–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π (TCP/UDP)
‚Ä¢	–ü—Ä–∏–∫–ª–∞–¥–Ω–æ–π (HTTP, SSH –∏ –¥—Ä.)
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫:
‚Ä¢	ip addr
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤:
‚Ä¢	ip route

‚∏ª

13.2 Subnetting ‚Äî –ü–æ–¥—Å–µ—Ç–∏

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	CIDR: /24, /16, /30
‚Ä¢	–ú–∞—Å–∫–∏ –ø–æ–¥—Å–µ—Ç–µ–π:
‚Ä¢	255.255.255.0
‚Ä¢	–ß–∞—Å—Ç–Ω—ã–µ IP-–¥–∏–∞–ø–∞–∑–æ–Ω—ã:
‚Ä¢	192.168.x.x
‚Ä¢	10.x.x.x
‚Ä¢	–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ç–∏ –Ω–∞ –ø–æ–¥—Å–µ—Ç–∏
‚Ä¢	–†–∞—Å—á—ë—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ö–æ—Å—Ç–æ–≤

‚∏ª

13.3 Ethernet & arp/rarp ‚Äî Ethernet –∏ ARP/RARP

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	MAC-–∞–¥—Ä–µ—Å–∞
‚Ä¢	ARP ‚Äî —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ IP ‚Üî MAC
‚Ä¢	–ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–∞–±–ª–∏—Ü—ã ARP:
‚Ä¢	arp -a
‚Ä¢	ARP-–∑–∞–ø—Ä–æ—Å—ã
‚Ä¢	RARP ‚Äî –æ–±—Ä–∞—Ç–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞

‚∏ª

13.4 DHCP ‚Äî –ü—Ä–æ—Ç–æ–∫–æ–ª DHCP

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ IP
‚Ä¢	–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã DHCP:
‚Ä¢	IP
‚Ä¢	mask
‚Ä¢	gateway
‚Ä¢	DNS
‚Ä¢	–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞—Ä–µ–Ω–¥—ã:
‚Ä¢	dhclient -r ‚Üí release
‚Ä¢	dhclient ‚Üí renew

‚∏ª

13.5 IP Routing ‚Äî –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è IP

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤:
‚Ä¢	ip route
‚Ä¢	–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞:
‚Ä¢	ip route add ...
‚Ä¢	–£–¥–∞–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞
‚Ä¢	Default gateway
‚Ä¢	–ù–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä—É—é—â–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è (forwarding):
‚Ä¢	/proc/sys/net/ipv4/ip_forward

‚∏ª

13.6 DNS Resolution ‚Äî –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ DNS

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ DNS:
‚Ä¢	dig domain.com
‚Ä¢	nslookup domain.com
‚Ä¢	–¢–∏–ø—ã –∑–∞–ø–∏—Å–µ–π:
‚Ä¢	A, AAAA
‚Ä¢	CNAME
‚Ä¢	MX
‚Ä¢	NS
‚Ä¢	–õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª hosts:
‚Ä¢	/etc/hosts
‚Ä¢	–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è DNS:
‚Ä¢	/etc/resolv.conf

‚∏ª

13.7 Netfilter ‚Äî Netfilter (iptables/nftables)

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–ß—Ç–æ —Ç–∞–∫–æ–µ firewall –≤ Linux
‚Ä¢	–°—Ç–∞—Ä—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫: iptables
‚Ä¢	–ù–æ–≤—ã–π: nftables
‚Ä¢	–ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–∞–≤–∏–ª:
‚Ä¢	iptables -L
‚Ä¢	nft list ruleset
‚Ä¢	–ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞:
‚Ä¢	DROP / ACCEPT
‚Ä¢	–¢–∞–±–ª–∏—Ü—ã –∏ —Ü–µ–ø–æ—á–∫–∏:
‚Ä¢	filter, nat, mangle
‚Ä¢	INPUT, OUTPUT, FORWARD

‚∏ª

13.8 SSH ‚Äî Secure Shell

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
‚Ä¢	ssh user@host
‚Ä¢	–ö–ª—é—á–∏ SSH:
‚Ä¢	~/.ssh/id_rsa
‚Ä¢	~/.ssh/authorized_keys
‚Ä¢	–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–∞:
‚Ä¢	ssh-keygen
‚Ä¢	–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–∞:
‚Ä¢	ssh-copy-id user@host
‚Ä¢	–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–µ–º–æ–Ω–∞:
‚Ä¢	/etc/ssh/sshd_config

‚∏ª

13.9 File Transfer ‚Äî –ü–µ—Ä–µ–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	scp ‚Äî –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ SSH:
‚Ä¢	scp file user@host:/path
‚Ä¢	rsync ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:
‚Ä¢	rsync -avz source/ user@host:/path
‚Ä¢	sftp ‚Äî FTP —á–µ—Ä–µ–∑ SSH
‚Ä¢	–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏