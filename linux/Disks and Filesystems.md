üóÑÔ∏è 11. Disks and Filesystems ‚Äî –î–∏—Å–∫–∏ –∏ —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã

11.1 Inodes ‚Äî –ò–Ω–æ–¥—ã

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–ß—Ç–æ —Ç–∞–∫–æ–µ inode (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–∞)
‚Ä¢	–ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ inode:
‚Ä¢	–≤–ª–∞–¥–µ–ª–µ—Ü
‚Ä¢	–ø—Ä–∞–≤–∞
‚Ä¢	—Å—Å—ã–ª–∫–∏
‚Ä¢	timestamp
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è inode:
‚Ä¢	df -i
‚Ä¢	–ü–æ—á–µ–º—É ‚Äú–Ω–µ—Ç –º–µ—Å—Ç–∞‚Äù, —Ö–æ—Ç—è –¥–∏—Å–∫ —Å–≤–æ–±–æ–¥–µ–Ω (–∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å inodes)
‚Ä¢	–ß–∏—Å–ª–æ –∂–µ—Å—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫

‚∏ª

11.2 Filesystems ‚Äî –§–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã:
‚Ä¢	ext4
‚Ä¢	xfs
‚Ä¢	btrfs
‚Ä¢	ntfs (—á–µ—Ä–µ–∑ ntfs-3g)
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã:
‚Ä¢	df -T
‚Ä¢	–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã:
‚Ä¢	mkfs.ext4 /dev/sdX
‚Ä¢	mkfs.xfs /dev/sdX
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞/—Ä–µ–º–æ–Ω—Ç:
‚Ä¢	fsck

‚∏ª

11.3 Swap ‚Äî –°–≤–æ–ø-—Ä–∞–∑–¥–µ–ª

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–ß—Ç–æ —Ç–∞–∫–æ–µ swap
‚Ä¢	–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–∫–æ–≥–¥–∞ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç RAM)
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞:
‚Ä¢	swapon --show
‚Ä¢	free -h
‚Ä¢	–°–æ–∑–¥–∞–Ω–∏–µ swap-—Ñ–∞–π–ª–∞:
‚Ä¢	fallocate -l 2G /swapfile
‚Ä¢	chmod 600 /swapfile
‚Ä¢	mkswap /swapfile
‚Ä¢	swapon /swapfile
‚Ä¢	–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ fstab

‚∏ª

11.4 Mounts ‚Äî –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
‚Ä¢	mount /dev/sdX /mnt
‚Ä¢	–†–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
‚Ä¢	umount /mnt
‚Ä¢	–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤:
‚Ä¢	lsblk
‚Ä¢	mount
‚Ä¢	df -h
‚Ä¢	–ê–≤—Ç–æ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ /etc/fstab
‚Ä¢	–¢–æ—á–∫–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

‚∏ª

11.5 Adding Disks ‚Äî –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∏—Å–∫–æ–≤

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–æ–≤—ã–π –¥–∏—Å–∫:
‚Ä¢	lsblk
‚Ä¢	fdisk -l
‚Ä¢	–†–∞–∑–º–µ—Ç–∫–∞ –¥–∏—Å–∫–∞:
‚Ä¢	fdisk (MBR)
‚Ä¢	parted (GPT)
‚Ä¢	–°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞:
‚Ä¢	/dev/sdX1, /dev/sdX2
‚Ä¢	–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã:
‚Ä¢	mkfs.ext4 /dev/sdX1
‚Ä¢	–ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞
‚Ä¢	–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ /etc/fstab

‚∏ª

11.6 LVM ‚Äî –õ–æ–≥–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–º–∞–º–∏

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
‚Ä¢	PV ‚Äî Physical Volume
‚Ä¢	VG ‚Äî Volume Group
‚Ä¢	LV ‚Äî Logical Volume
‚Ä¢	–°–æ–∑–¥–∞–Ω–∏–µ:
‚Ä¢	pvcreate /dev/sdX1
‚Ä¢	vgcreate myvg /dev/sdX1
‚Ä¢	lvcreate -L 10G -n mylv myvg
‚Ä¢	–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ LV
‚Ä¢	–£–≤–µ–ª–∏—á–µ–Ω–∏–µ LVM:
‚Ä¢	lvextend + resize2fs
‚Ä¢	–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è:
‚Ä¢	pvs, vgs, lvs
