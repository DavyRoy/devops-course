üê≥ 16. Containerization ‚Äî –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

16.1 ulimits ‚Äî –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–ß—Ç–æ —Ç–∞–∫–æ–µ ulimit ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Linux –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –ª–∏–º–∏—Ç—ã:
‚Ä¢	ulimit -a
‚Ä¢	–í–∞–∂–Ω—ã–µ –ª–∏–º–∏—Ç—ã:
‚Ä¢	–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–æ–≤ (nofile)
‚Ä¢	—Ä–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞ (stack)
‚Ä¢	–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (nproc)
‚Ä¢	–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤:
‚Ä¢	–≤—Ä–µ–º–µ–Ω–Ω–æ: ulimit -n 65535
‚Ä¢	–ø–æ—Å—Ç–æ—è–Ω–Ω–æ: —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ /etc/security/limits.conf
‚Ä¢	–í–ª–∏—è–Ω–∏–µ ulimit –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

‚∏ª

16.2 cgroups ‚Äî –ö–æ–Ω—Ç—Ä–æ–ª—å –≥—Ä—É–ø–ø –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–ß—Ç–æ —Ç–∞–∫–æ–µ cgroups (Control Groups)
‚Ä¢	–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏:
‚Ä¢	CPU
‚Ä¢	–ø–∞–º—è—Ç—å
‚Ä¢	IO
‚Ä¢	–ø—Ä–æ—Ü–µ—Å—Å—ã
‚Ä¢	–í–µ—Ä—Å–∏–∏:
‚Ä¢	cgroups v1
‚Ä¢	cgroups v2
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö cgroups:
‚Ä¢	cat /proc/<pid>/cgroup
‚Ä¢	–†–æ–ª—å cgroups –≤–Ω—É—Ç—Ä–∏ Docker/Kubernetes

‚∏ª

16.3 Container Runtime ‚Äî –°—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–ü–æ–¥—Ç–µ–º—ã:
‚Ä¢	–ß—Ç–æ —Ç–∞–∫–æ–µ container runtime
‚Ä¢	–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ä–∞–Ω—Ç–∞–π–º—ã:
‚Ä¢	runc
‚Ä¢	containerd
‚Ä¢	CRI-O
‚Ä¢	Docker Engine
‚Ä¢	–û—Ç–ª–∏—á–∏–µ Docker Engine –æ—Ç containerd
‚Ä¢	–ö–∞–∫ runtime —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏–∑–æ–ª—è—Ü–∏–µ–π:
‚Ä¢	namespaces
‚Ä¢	cgroups

‚∏ª

16.4 Docker ‚Äî Docker (–æ—Å–Ω–æ–≤—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏)

–ü–æ–¥—Ç–µ–º—ã:

–ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
‚Ä¢	–û–±—Ä–∞–∑—ã:
‚Ä¢	docker pull image
‚Ä¢	docker images
‚Ä¢	docker rmi image
‚Ä¢	–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
‚Ä¢	docker run image
‚Ä¢	docker run -d ‚Äî –≤ —Ñ–æ–Ω–µ
‚Ä¢	docker ps ‚Äî —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
‚Ä¢	docker stop container
‚Ä¢	docker rm container

–†–∞–±–æ—Ç–∞ —Å Dockerfile
‚Ä¢	–û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
‚Ä¢	FROM ‚Äî –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑
‚Ä¢	COPY ‚Äî –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
‚Ä¢	RUN ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥
‚Ä¢	CMD / ENTRYPOINT ‚Äî –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞
‚Ä¢	EXPOSE ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ–º—ã–µ –ø–æ—Ä—Ç—ã
‚Ä¢	–°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞:
‚Ä¢	docker build -t myimage .

–°–µ—Ç–∏ Docker
‚Ä¢	–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–µ—Ç–µ–π:
‚Ä¢	docker network ls
‚Ä¢	–¢–∏–ø—ã —Å–µ—Ç–µ–π:
‚Ä¢	bridge
‚Ä¢	host
‚Ä¢	none

–¢–æ–º–∞ (volumes)
‚Ä¢	–°–æ–∑–¥–∞–Ω–∏–µ:
‚Ä¢	docker volume create vol
‚Ä¢	–ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
‚Ä¢	docker run -v vol:/path image
‚Ä¢	–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

–†–µ–≥–∏—Å—Ç—Ä—ã
‚Ä¢	Docker Hub
‚Ä¢	–ß–∞—Å—Ç–Ω—ã–µ registry
‚Ä¢	Push/pull –æ–±—Ä–∞–∑–æ–≤
